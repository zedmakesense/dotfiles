# vim: ft=swayconfig
# set $systemd systemd-run --user --scope
set $term foot
set $menu fuzzel --placeholder "Search ..."
set $browser firefox-esr
set $fileBrowser pcmanfm

set $calc '$term --title="float" -e qalc'
set $emoji bemoji
set $network networkmanager_dmenu

set $text grim -g "$(slurp)" - | tesseract stdin stdout | wl-copy
set $paste cliphist.sh

set $SS grim - | wl-copy && wl-paste --type image/png > ~/Pictures/Screenshots/temp/$(date +'%Y-%m-%d-%H%M%S').png
set $SSselect grim -g "$(slurp)" - | wl-copy && wl-paste --type image/png > ~/Pictures/Screenshots/temp/$(date +'%Y-%m-%d-%H%M%S').png
set $SSedit grim -g "$(slurp)" - | swappy -f -

set $htop '$term -a htop htop'
set $nvtop '$term -a nvtop nvtop'
set $color hyprpicker | wl-copy
# set $color color.sh
set $index '$term --title="float" -e nvim ~/Documents/personal/wiki/index.txt'
set $wiki '$term --title="float" -e wiki.sh'
set $search $term --title="float" -e sh -c 'rg --no-heading --line-number --color=always "" ~/Documents/personal/wiki/ | fzf --ansi | cut -d: -f1 | uniq | xargs -r nvim'
set $explore $term --title="float" -e sh -c 'fzf <<< "$(ls ~/Documents/personal/wiki)" | xargs -r -I {} nvim ~/Documents/personal/wiki/{}'
set $delete $term --title="float" -e sh -c 'fzf <<< "$(ls ~/Documents/personal/wiki)" | xargs -r -I {} trash ~/Documents/personal/wiki/{}'
set $news '$term --title="float" -e newsraft'

bindsym $mod+Return exec $term
bindsym $mod+Shift+f exec '$term --title="float"'
bindsym $mod+space exec $menu
bindsym $mod+e exec $fileBrowser

bindsym $mod+Shift+Return exec $browser
mode "index" {
    bindsym c exec $wiki; mode default
    bindsym i exec $index; mode default
    bindsym s exec $search; mode default
    bindsym e exec $explore; mode default
    bindsym d exec $delete; mode default
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym Control+bracketleft mode "default"
}
bindsym $mod+w mode "index"
bindsym $mod+Shift+n exec $news

bindsym $mod+v exec $paste
bindsym $mod+x exec --no-startup-id $text
bindsym $mod+c exec $calc
bindsym $mod+period exec $emoji
bindsym $mod+n exec $network

bindsym Ctrl+Escape exec $nvtop
bindsym Ctrl+Shift+Escape exec $htop

# bindsym $mod+n exec swaync-client -t -sw
# bindsym Ctrl+Delete exec swaync-client --hide-latest
bindsym Ctrl+Delete exec makoctl dismiss

bindsym Print exec $SS
bindsym $mod+s exec $SSselect
bindsym $mod+Shift+s exec $SSedit
bindsym $mod+p exec $color
bindsym $mod+Ctrl+r exec wf-recorder -g "$(slurp)" -f ~/Videos/recording_$(date +'%F_%T').mp4
bindsym $mod+Ctrl+s exec pkill -INT wf-recorder

mode "systemctl" {
    bindsym r exec systemctl reboot; mode default
    bindsym p exec systemctl poweroff; mode default
    bindsym e exec sway exit; mode default
    bindsym l exec swaylock --ignore-empty-password --show-failed-attempts -fFec 282828; mode default
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym Control+bracketleft mode "default"
}
bindsym $mod+Shift+o mode "systemctl"
# bindsym $mod+Shift+o exec systemctl.sh
